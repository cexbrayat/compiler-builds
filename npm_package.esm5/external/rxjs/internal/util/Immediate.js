var nextHandle = 1;
var tasksByHandle = {};
function runIfPresent(handle) {
    var cb = tasksByHandle[handle];
    if (cb) {
        cb();
    }
}
export var Immediate = {
    setImmediate: function (cb) {
        var handle = nextHandle++;
        tasksByHandle[handle] = cb;
        Promise.resolve().then(function () { return runIfPresent(handle); });
        return handle;
    },
    clearImmediate: function (handle) {
        delete tasksByHandle[handle];
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1tZWRpYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vZXh0ZXJuYWwvcnhqcy9pbnRlcm5hbC91dGlsL0ltbWVkaWF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFJLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFFbkIsSUFBTSxhQUFhLEdBQXFDLEVBQUUsQ0FBQztBQUUzRCxTQUFTLFlBQVksQ0FBQyxNQUFjO0lBQ2xDLElBQU0sRUFBRSxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNqQyxJQUFJLEVBQUUsRUFBRTtRQUNOLEVBQUUsRUFBRSxDQUFDO0tBQ047QUFDSCxDQUFDO0FBRUQsTUFBTSxDQUFDLElBQU0sU0FBUyxHQUFHO0lBQ3ZCLFlBQVksRUFBWixVQUFhLEVBQWM7UUFDekIsSUFBTSxNQUFNLEdBQUcsVUFBVSxFQUFFLENBQUM7UUFDNUIsYUFBYSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUMzQixPQUFPLENBQUMsT0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLGNBQU0sT0FBQSxZQUFZLENBQUMsTUFBTSxDQUFDLEVBQXBCLENBQW9CLENBQUMsQ0FBQztRQUNuRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0lBRUQsY0FBYyxFQUFkLFVBQWUsTUFBYztRQUMzQixPQUFPLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMvQixDQUFDO0NBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImxldCBuZXh0SGFuZGxlID0gMTtcblxuY29uc3QgdGFza3NCeUhhbmRsZTogeyBbaGFuZGxlOiBzdHJpbmddOiAoKSA9PiB2b2lkIH0gPSB7fTtcblxuZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZTogbnVtYmVyKSB7XG4gIGNvbnN0IGNiID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICBpZiAoY2IpIHtcbiAgICBjYigpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBJbW1lZGlhdGUgPSB7XG4gIHNldEltbWVkaWF0ZShjYjogKCkgPT4gdm9pZCk6IG51bWJlciB7XG4gICAgY29uc3QgaGFuZGxlID0gbmV4dEhhbmRsZSsrO1xuICAgIHRhc2tzQnlIYW5kbGVbaGFuZGxlXSA9IGNiO1xuICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gcnVuSWZQcmVzZW50KGhhbmRsZSkpO1xuICAgIHJldHVybiBoYW5kbGU7XG4gIH0sXG5cbiAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlOiBudW1iZXIpOiB2b2lkIHtcbiAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICB9LFxufTtcbiJdfQ==